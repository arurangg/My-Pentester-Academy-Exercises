#! /usr/bin/env python

import socket
import sys
from signal import SIGINT, signal

def sig_handler(signal_number, interrupted_stack_frame):
        print "\nSIGINT received..Bye Bye"
	sys.exit(0)

signal(SIGINT, sig_handler)

tcpSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
tcpSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR,1)

if(len(sys.argv) < 2):
	port = 1337
else:
	port = int(sys.argv[1])
tcpSocket.bind(('', port))

tcpSocket.listen(1)

(client, (ip, sock)) = tcpSocket.accept()

print "Accepted connection from: ", ip

data = "tmp"

while len(data):
	data = client.recv(1024)
	print "Received: ", data
	client.send(data)

client.close()
